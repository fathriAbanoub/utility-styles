// CSS Custom Properties Automation System
// Automatically generates and manages CSS custom properties for maximum flexibility

@use "sass:meta";

// Variable Generation Mixin
@mixin generate-css-variables($map, $prefix: '') {
  @each $key, $value in $map {
    @if meta.type-of($value) == 'map' {
      @include generate-css-variables($value, '#{$prefix}#{$key}-');
    } @else {
      --#{$prefix}#{$key}: #{$value};
    }
  }
}

// Runtime Variable Manipulation Functions
@function get-css-var($name, $fallback: null) {
  @if $fallback {
    @return var(--#{$name}, #{$fallback});
  } @else {
    @return var(--#{$name});
  }
}

// Performance-optimized variable scoping
@mixin scope-variables($scope, $variables) {
  #{$scope} {
    @include generate-css-variables($variables);
  }
}

// Auto-generate CSS variables from SCSS maps
$color-palette: (
  'primary': (
    '50': #eff6ff,
    '100': #dbeafe,
    '200': #bfdbfe,
    '300': #93c5fd,
    '400': #60a5fa,
    '500': #3b82f6,
    '600': #2563eb,
    '700': #1d4ed8,
    '800': #1e40af,
    '900': #1e3a8a
  ),
  'gray': (
    '50': #f9fafb,
    '100': #f3f4f6,
    '200': #e5e7eb,
    '300': #d1d5db,
    '400': #9ca3af,
    '500': #6b7280,
    '600': #4b5563,
    '700': #374151,
    '800': #1f2937,
    '900': #111827
  )
);

$spacing-scale: (
  '0': 0,
  'px': 1px,
  '0.5': 0.125rem,
  '1': 0.25rem,
  '1.5': 0.375rem,
  '2': 0.5rem,
  '2.5': 0.625rem,
  '3': 0.75rem,
  '3.5': 0.875rem,
  '4': 1rem,
  '5': 1.25rem,
  '6': 1.5rem,
  '7': 1.75rem,
  '8': 2rem,
  '9': 2.25rem,
  '10': 2.5rem,
  '11': 2.75rem,
  '12': 3rem,
  '14': 3.5rem,
  '16': 4rem,
  '20': 5rem,
  '24': 6rem,
  '28': 7rem,
  '32': 8rem,
  '36': 9rem,
  '40': 10rem,
  '44': 11rem,
  '48': 12rem,
  '52': 13rem,
  '56': 14rem,
  '60': 15rem,
  '64': 16rem,
  '72': 18rem,
  '80': 20rem,
  '96': 24rem
);

$typography-scale: (
  'xs': (
    'size': 0.75rem,
    'line-height': 1rem
  ),
  'sm': (
    'size': 0.875rem,
    'line-height': 1.25rem
  ),
  'base': (
    'size': 1rem,
    'line-height': 1.5rem
  ),
  'lg': (
    'size': 1.125rem,
    'line-height': 1.75rem
  ),
  'xl': (
    'size': 1.25rem,
    'line-height': 1.75rem
  ),
  '2xl': (
    'size': 1.5rem,
    'line-height': 2rem
  ),
  '3xl': (
    'size': 1.875rem,
    'line-height': 2.25rem
  ),
  '4xl': (
    'size': 2.25rem,
    'line-height': 2.5rem
  ),
  '5xl': (
    'size': 3rem,
    'line-height': 1
  ),
  '6xl': (
    'size': 3.75rem,
    'line-height': 1
  ),
  '7xl': (
    'size': 4.5rem,
    'line-height': 1
  ),
  '8xl': (
    'size': 6rem,
    'line-height': 1
  ),
  '9xl': (
    'size': 8rem,
    'line-height': 1
  )
);

// Generate all CSS variables
:root {
  @include generate-css-variables($color-palette, 'color-');
  @include generate-css-variables($spacing-scale, 'space-');
  @include generate-css-variables($typography-scale, 'text-');
  
  // Animation variables
  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-out: cubic-bezier(0, 0, 0.2, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
  
  // Duration variables
  --duration-75: 75ms;
  --duration-100: 100ms;
  --duration-150: 150ms;
  --duration-200: 200ms;
  --duration-300: 300ms;
  --duration-500: 500ms;
  --duration-700: 700ms;
  --duration-1000: 1000ms;
}

// Variable dependency tracking
@mixin track-dependency($variable, $depends-on) {
  // This creates a comment for build-time analysis
  /* DEPENDENCY: #{$variable} depends on #{$depends-on} */
}

// Performance-optimized variable updates
@mixin update-css-var($name, $value) {
  --#{$name}: #{$value};
}

// Batch variable updates for better performance
@mixin update-css-vars($variables) {
  @each $name, $value in $variables {
    @include update-css-var($name, $value);
  }
}
